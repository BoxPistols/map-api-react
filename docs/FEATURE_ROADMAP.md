# GGMap æ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ãƒ»è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³](#ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³)
3. [Phase 1: è©³ç´°æƒ…å ±è¡¨ç¤ºæ©Ÿèƒ½](#phase-1-è©³ç´°æƒ…å ±è¡¨ç¤ºæ©Ÿèƒ½)
4. [Phase 2: è¡ŒããŸã„ã¨ã“ã‚ãƒªã‚¹ãƒˆæ©Ÿèƒ½](#phase-2-è¡ŒããŸã„ã¨ã“ã‚ãƒªã‚¹ãƒˆæ©Ÿèƒ½)
5. [Phase 3: Firebaseé€£æºåŸºç›¤æ§‹ç¯‰](#phase-3-firebaseé€£æºåŸºç›¤æ§‹ç¯‰)
6. [Phase 4: çµŒè·¯ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº](#phase-4-çµŒè·¯ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº)
7. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©)
8. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
9. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼)
10. [å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«](#å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ãƒ“ã‚¸ãƒ§ãƒ³
GGMapã‚’**å˜ãªã‚‹åœ°å›³æ¤œç´¢ã‚¢ãƒ—ãƒª**ã‹ã‚‰**ç·åˆæ—…è¡Œãƒ»å¤–å‡ºãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã¸ã¨é€²åŒ–ã•ã›ã‚‹ã€‚

### ç›®æ¨™
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡ŒããŸã„å ´æ‰€ã‚’ç™ºè¦‹ãƒ»ä¿å­˜ãƒ»ç®¡ç†ã§ãã‚‹
- è©³ç´°ãªå ´æ‰€æƒ…å ±ï¼ˆå–¶æ¥­æ™‚é–“ã€å£ã‚³ãƒŸã€å†™çœŸï¼‰ã‚’æä¾›
- æœ€é©ãªçµŒè·¯ã‚’ææ¡ˆã—ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã§ãã‚‹
- ãƒ‡ãƒã‚¤ã‚¹é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸã—ã€ã„ã¤ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- Googleã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«é€£æº

### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- æ—…è¡Œå¥½ãã€å¤–å‡ºå¥½ãã®å€‹äººãƒ¦ãƒ¼ã‚¶ãƒ¼
- é€±æœ«ã®ãŠå‡ºã‹ã‘ã‚’è¨ˆç”»ã™ã‚‹å®¶æ—
- å‡ºå¼µãŒå¤šã„ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ã‚½ãƒ³
- è¦³å…‰åœ°ã‚’æ¢ç´¢ã™ã‚‹è¨ªæ—¥å¤–å›½äºº

---

## ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

#### åŸºæœ¬æ©Ÿèƒ½
- Google Mapsçµ±åˆ
- ä½æ‰€æ¤œç´¢ï¼ˆGeocoding APIï¼‰
- å ´æ‰€æ¤œç´¢ï¼ˆPlaces API Text Searchï¼‰
- ãƒ”ãƒ³ãƒ¢ãƒ¼ãƒ‰ï¼ˆåœ°å›³ã‚¯ãƒªãƒƒã‚¯ã§ãƒ”ãƒ³è¿½åŠ ï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼‰

#### ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- localStorageè‡ªå‹•ä¿å­˜ãƒ»å¾©å…ƒ
- ãƒ”ãƒ³ä¸€è¦§è¡¨ç¤ºï¼ˆå³ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰
- æ¤œç´¢çµæœä¸€è¦§ï¼ˆå·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰
- JSON/CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- JSON ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- å…¨ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½

#### å±¥æ­´ç®¡ç†
- ãƒ”ãƒ³å±¥æ­´ï¼ˆæœ€å¤§50ä»¶ï¼‰
- æ¤œç´¢å±¥æ­´ï¼ˆæœ€å¤§50ä»¶ï¼‰
- è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ã§CRUDæ“ä½œ
- æ—¥ä»˜ã‚°ãƒ«ãƒ¼ãƒ—åŒ–è¡¨ç¤º
- å±¥æ­´ã‹ã‚‰å¾©å…ƒæ©Ÿèƒ½

#### UI/UX
- Glassmorphismãƒ‡ã‚¶ã‚¤ãƒ³
- ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ”ãƒ³ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã§ã‚ºãƒ¼ãƒ ï¼ˆzoom level 18ï¼‰
- å…¨ç”»é¢è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆFã‚­ãƒ¼ï¼‰
- æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ãªã‚µã‚¤ãƒ‰ãƒãƒ¼

---

## Phase 1: è©³ç´°æƒ…å ±è¡¨ç¤ºæ©Ÿèƒ½

### ç›®çš„
Google Places API Details ã‚’æ´»ç”¨ã—ã¦ã€å„å ´æ‰€ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„æ€æ±ºå®šã‚’ã‚µãƒãƒ¼ãƒˆã€‚

### æ©Ÿèƒ½è¦ä»¶

#### 1.1 è©³ç´°æƒ…å ±ãƒ‘ãƒãƒ«

**è¡¨ç¤ºã™ã‚‹æƒ…å ±**
- âœ… åŸºæœ¬æƒ…å ±
  - åå‰
  - ã‚«ãƒ†ã‚´ãƒªï¼ˆãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã€ã‚«ãƒ•ã‚§ã€è¦³å…‰åœ°ãªã©ï¼‰
  - ä½æ‰€
  - é›»è©±ç•ªå·
  - Webã‚µã‚¤ãƒˆ URL
  - Google Maps URL

- âœ… è©•ä¾¡ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼
  - æ˜Ÿè©•ä¾¡ï¼ˆ0-5ï¼‰
  - ç·ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°
  - ä¾¡æ ¼å¸¯ï¼ˆÂ¥ã€œÂ¥Â¥Â¥Â¥ï¼‰
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæœ€æ–°5ä»¶ï¼‰
  - å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼

- âœ… å–¶æ¥­æƒ…å ±
  - å–¶æ¥­æ™‚é–“ï¼ˆæ›œæ—¥åˆ¥ï¼‰
  - ç¾åœ¨å–¶æ¥­ä¸­ã‹ã©ã†ã‹ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
  - å®šä¼‘æ—¥
  - æ··é›‘çŠ¶æ³ï¼ˆã‚ã‚Œã°ï¼‰

- âœ… ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
  - è»Šæ¤…å­å¯¾å¿œ
  - é§è»Šå ´ã®æœ‰ç„¡
  - Wi-Fi ã®æœ‰ç„¡

#### 1.2 UIè¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Ã—]  å ´æ‰€å                    [â˜…] â”‚  â† ãƒ˜ãƒƒãƒ€ãƒ¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“· [å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼ - ã‚¹ãƒ¯ã‚¤ãƒ—å¯èƒ½]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â­ 4.5 (1,234 reviews)  Â¥Â¥Â¥      â”‚
â”‚  ğŸŸ¢ å–¶æ¥­ä¸­ Â· 18:00ã«é–‰åº—            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ä½æ‰€: æ±äº¬éƒ½...                 â”‚
â”‚  ğŸ“ é›»è©±: 03-1234-5678              â”‚
â”‚  ğŸŒ Webã‚µã‚¤ãƒˆ                       â”‚
â”‚  ğŸ”— Google Mapsã§é–‹ã               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… å–¶æ¥­æ™‚é–“                        â”‚
â”‚     æœˆ-é‡‘: 10:00-18:00              â”‚
â”‚     åœŸæ—¥: 11:00-20:00               â”‚
â”‚     å®šä¼‘æ—¥: ãªã—                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ ãƒ¬ãƒ“ãƒ¥ãƒ¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â­â­â­â­â­ å¤ªéƒã•ã‚“              â”‚  â”‚
â”‚  â”‚ "ã¨ã¦ã‚‚è‰¯ã‹ã£ãŸã§ã™..."          â”‚  â”‚
â”‚  â”‚ ğŸ“·ğŸ“·                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [ã‚‚ã£ã¨è¦‹ã‚‹]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â™¿ è»Šæ¤…å­å¯¾å¿œ ğŸ…¿ï¸ é§è»Šå ´ã‚ã‚Š        â”‚
â”‚  ğŸ“¶ Wi-Fiã‚ã‚Š                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ’¾ ä¿å­˜]  [ğŸ“ ãƒ”ãƒ³è¿½åŠ ]  [ğŸš— çµŒè·¯]â”‚  â† ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.3 è¡¨ç¤ºãƒˆãƒªã‚¬ãƒ¼

- æ¤œç´¢çµæœã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«ã§è©³ç´°è¡¨ç¤º
- ãƒ”ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ è©³ç´°æƒ…å ±ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
- åœ°å›³ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ã‚¤ãƒ³ãƒ•ã‚©ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º

### æŠ€è¡“ä»•æ§˜

#### 1.4 APIçµ±åˆ

**Google Places API - Place Details**

```javascript
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
const request = {
  placeId: 'ChIJN1t_tDeuEmsRUsoyG83frY4',
  fields: [
    'name',
    'rating',
    'formatted_phone_number',
    'formatted_address',
    'opening_hours',
    'website',
    'price_level',
    'photos',
    'reviews',
    'geometry',
    'wheelchair_accessible_entrance',
    'url'
  ],
  language: 'ja'
}

service.getDetails(request, (place, status) => {
  if (status === google.maps.places.PlacesServiceStatus.OK) {
    // è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
  }
})
```

#### 1.5 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
æ¤œç´¢çµæœã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯
  â†“
place_id ã‚’å–å¾—
  â†“
Places API Details ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  â†“
ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡
  â†“
è©³ç´°æƒ…å ±ã‚’ state ã«ä¿å­˜
  â†“
DetailPanel ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¡¨ç¤º
```

#### 1.6 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 

```
src/components/
â”œâ”€â”€ PlaceDetail/
â”‚   â”œâ”€â”€ PlaceDetail.jsx          # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ PlaceDetail.module.scss
â”‚   â”œâ”€â”€ PhotoGallery.jsx         # å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼
â”‚   â”œâ”€â”€ ReviewList.jsx           # ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§
â”‚   â”œâ”€â”€ OpeningHours.jsx         # å–¶æ¥­æ™‚é–“
â”‚   â””â”€â”€ PlaceActions.jsx         # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
```

#### 1.7 çŠ¶æ…‹ç®¡ç†

```javascript
// App.js ã«è¿½åŠ 
const [selectedPlace, setSelectedPlace] = useState(null)
const [placeDetails, setPlaceDetails] = useState(null)
const [isDetailPanelOpen, setIsDetailPanelOpen] = useState(false)

// è©³ç´°æƒ…å ±å–å¾—é–¢æ•°
const fetchPlaceDetails = useCallback((placeId) => {
  if (!window.google?.maps?.places) return

  const service = new window.google.maps.places.PlacesService(
    document.createElement('div')
  )

  const request = {
    placeId: placeId,
    fields: [...], // å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    language: 'ja'
  }

  service.getDetails(request, (place, status) => {
    if (status === window.google.maps.places.PlacesServiceStatus.OK) {
      setPlaceDetails(place)
      setIsDetailPanelOpen(true)
    }
  })
}, [])
```

### å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

1. **Step 1.1**: PlaceDetail ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
2. **Step 1.2**: Places API Details çµ±åˆ
3. **Step 1.3**: å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼å®Ÿè£…ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—å¯¾å¿œï¼‰
4. **Step 1.4**: ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºæ©Ÿèƒ½
5. **Step 1.5**: å–¶æ¥­æ™‚é–“ãƒ»å–¶æ¥­çŠ¶æ³è¡¨ç¤º
6. **Step 1.6**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´
7. **Step 1.7**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**: ä¸€åº¦å–å¾—ã—ãŸè©³ç´°æƒ…å ±ã¯ãƒ¡ãƒ¢ãƒªã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **é…å»¶èª­ã¿è¾¼ã¿**: å†™çœŸã¯å¿…è¦ã«ãªã‚‹ã¾ã§èª­ã¿è¾¼ã¾ãªã„
- **API ã‚¯ã‚©ãƒ¼ã‚¿ç®¡ç†**: å¿…è¦æœ€å°é™ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

---

## Phase 2: è¡ŒããŸã„ã¨ã“ã‚ãƒªã‚¹ãƒˆæ©Ÿèƒ½

### ç›®çš„
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨ªå•äºˆå®šã®å ´æ‰€ã‚’ã€Œè¡ŒããŸã„ã¨ã“ã‚ãƒªã‚¹ãƒˆï¼ˆã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆï¼‰ã€ã¨ã—ã¦ä¿å­˜ãƒ»ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

### æ©Ÿèƒ½è¦ä»¶

#### 2.1 ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆåŸºæœ¬æ©Ÿèƒ½

**CRUDæ“ä½œ**
- âœ… Create: å ´æ‰€ã‚’ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆã«è¿½åŠ 
- âœ… Read: ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆä¸€è¦§è¡¨ç¤º
- âœ… Update: ãƒ¡ãƒ¢ãƒ»ã‚¿ã‚°ãƒ»å„ªå…ˆåº¦ã®ç·¨é›†
- âœ… Delete: ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤

**è¿½åŠ æƒ…å ±**
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒ¢ï¼ˆè¡ŒããŸã„ç†ç”±ã€äºˆç®—ã€èª°ã¨è¡Œãã‹ãªã©ï¼‰
- ã‚¿ã‚°ä»˜ã‘ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰
  - ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³
  - ã‚«ãƒ•ã‚§
  - è¦³å…‰åœ°
  - ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°
  - ç¾è¡“é¤¨ãƒ»åšç‰©é¤¨
  - å…¬åœ’
  - ãã®ä»–ï¼ˆã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°ï¼‰
- å„ªå…ˆåº¦ï¼ˆé«˜ãƒ»ä¸­ãƒ»ä½ï¼‰
- è¿½åŠ æ—¥æ™‚
- è¨ªå•äºˆå®šæ—¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### 2.2 ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»ã‚½ãƒ¼ãƒˆ

**ãƒ•ã‚£ãƒ«ã‚¿**
- ã‚¿ã‚°ã§ãƒ•ã‚£ãƒ«ã‚¿
- å„ªå…ˆåº¦ã§ãƒ•ã‚£ãƒ«ã‚¿
- è©•ä¾¡ï¼ˆæ˜Ÿï¼‰ã§ãƒ•ã‚£ãƒ«ã‚¿
- ä¾¡æ ¼å¸¯ã§ãƒ•ã‚£ãƒ«ã‚¿

**ã‚½ãƒ¼ãƒˆ**
- è¿½åŠ æ—¥æ™‚ï¼ˆæ–°ã—ã„é †ãƒ»å¤ã„é †ï¼‰
- å„ªå…ˆåº¦ï¼ˆé«˜â†’ä½ã€ä½â†’é«˜ï¼‰
- è©•ä¾¡ï¼ˆé«˜â†’ä½ã€ä½â†’é«˜ï¼‰
- åå‰ï¼ˆã‚ã„ã†ãˆãŠé †ï¼‰
- è·é›¢ï¼ˆç¾åœ¨åœ°ã‹ã‚‰è¿‘ã„é †ï¼‰

#### 2.3 UIè¨­è¨ˆ

**ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆãƒ‘ãƒãƒ«**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¡ŒããŸã„ã¨ã“ã‚ãƒªã‚¹ãƒˆ (12)           â”‚
â”‚  [+ æ–°è¦è¿½åŠ ]  [ğŸ” æ¤œç´¢]  [âš™ï¸ è¨­å®š] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ã‚¿ã‚°: ã™ã¹ã¦ â–¼]  [ä¸¦ã³æ›¿ãˆ: æ–°ã—ã„é † â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ·ï¸ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ | ğŸ”´ å„ªå…ˆåº¦: é«˜   â”‚  â”‚
â”‚  â”‚ ã‚«ãƒ•ã‚§â—‹â—‹                       â”‚  â”‚
â”‚  â”‚ â­ 4.5  Â¥Â¥  ğŸ“ æ¸‹è°·            â”‚  â”‚
â”‚  â”‚ ğŸ’¬ "å‹é”ã¨è¡ŒããŸã„ã€‚ãƒ‘ã‚¹ã‚¿ãŒ..."â”‚  â”‚
â”‚  â”‚ ğŸ“… äºˆå®š: 2025/12/15            â”‚  â”‚
â”‚  â”‚ [ğŸ‘ï¸ è©³ç´°]  [ğŸ“ åœ°å›³]  [âœï¸]  [ğŸ—‘ï¸] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ·ï¸ è¦³å…‰åœ° | ğŸŸ¡ å„ªå…ˆåº¦: ä¸­      â”‚  â”‚
â”‚  â”‚ æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼                â”‚  â”‚
â”‚  â”‚ ...                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [< å‰ã¸]  1/3ãƒšãƒ¼ã‚¸  [æ¬¡ã¸ >]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆã«è¿½åŠ               â”‚
â”‚                                [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã‚«ãƒ•ã‚§â—‹â—‹                          â”‚
â”‚  ğŸ“ æ¸‹è°·åŒº...                       â”‚
â”‚  â­ 4.5  Â¥Â¥                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ·ï¸ ã‚¿ã‚° (è¤‡æ•°é¸æŠå¯)              â”‚
â”‚  [âœ“] ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³  [ ] ã‚«ãƒ•ã‚§         â”‚
â”‚  [ ] è¦³å…‰åœ°      [âœ“] ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°   â”‚
â”‚  [+ ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°ã‚’è¿½åŠ ]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ å„ªå…ˆåº¦                          â”‚
â”‚  ( ) é«˜  (â€¢) ä¸­  ( ) ä½            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… è¨ªå•äºˆå®šæ—¥ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)          â”‚
â”‚  [2025-12-15ã‚’é¸æŠ]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ ãƒ¡ãƒ¢                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å‹é”ã¨è¡ŒããŸã„ã€‚               â”‚  â”‚
â”‚  â”‚ ãƒ‘ã‚¹ã‚¿ãŒãŠã™ã™ã‚ã‚‰ã—ã„ã€‚        â”‚  â”‚
â”‚  â”‚ äºˆç®—: 3000å††                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [ä¿å­˜]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

#### 2.4 WishlistItem ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface WishlistItem {
  id: string                    // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
  placeId: string              // Google Places API place_id
  name: string                 // å ´æ‰€å
  address: string              // ä½æ‰€
  lat: number                  // ç·¯åº¦
  lng: number                  // çµŒåº¦
  rating?: number              // è©•ä¾¡ (0-5)
  priceLevel?: number          // ä¾¡æ ¼å¸¯ (0-4)
  photoUrl?: string            // ä»£è¡¨å†™çœŸURL

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿½åŠ ã™ã‚‹æƒ…å ±
  tags: string[]               // ã‚¿ã‚°é…åˆ—
  priority: 'high' | 'medium' | 'low'  // å„ªå…ˆåº¦
  memo: string                 // ãƒ¡ãƒ¢
  visitDate?: string           // è¨ªå•äºˆå®šæ—¥ (ISO 8601)

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt: number            // è¿½åŠ æ—¥æ™‚ (timestamp)
  updatedAt: number            // æ›´æ–°æ—¥æ™‚ (timestamp)
  visited: boolean             // è¨ªå•æ¸ˆã¿ãƒ•ãƒ©ã‚°
  visitedAt?: number           // è¨ªå•æ—¥æ™‚ (timestamp)
}
```

#### 2.5 localStorage ã‚¹ã‚­ãƒ¼ãƒ

```javascript
// LocalStorage Key
const WISHLIST_KEY = 'ggmap_wishlist'

// ãƒ‡ãƒ¼ã‚¿ä¾‹
{
  "wishlist": [
    {
      "id": "wl_1234567890",
      "placeId": "ChIJ...",
      "name": "ã‚«ãƒ•ã‚§â—‹â—‹",
      "address": "æ±äº¬éƒ½æ¸‹è°·åŒº...",
      "lat": 35.6585805,
      "lng": 139.7454329,
      "rating": 4.5,
      "priceLevel": 2,
      "photoUrl": "https://...",
      "tags": ["ã‚«ãƒ•ã‚§", "ãƒ‡ãƒ¼ãƒˆ"],
      "priority": "high",
      "memo": "å‹é”ã¨è¡ŒããŸã„ã€‚ãƒ‘ã‚¹ã‚¿ãŒãŠã™ã™ã‚ã€‚",
      "visitDate": "2025-12-15",
      "createdAt": 1700000000000,
      "updatedAt": 1700000000000,
      "visited": false
    }
  ]
}
```

### æŠ€è¡“ä»•æ§˜

#### 2.6 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 

```
src/components/
â”œâ”€â”€ Wishlist/
â”‚   â”œâ”€â”€ Wishlist.jsx              # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ Wishlist.module.scss
â”‚   â”œâ”€â”€ WishlistItem.jsx          # ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ 
â”‚   â”œâ”€â”€ WishlistFilter.jsx        # ãƒ•ã‚£ãƒ«ã‚¿UI
â”‚   â”œâ”€â”€ WishlistSort.jsx          # ã‚½ãƒ¼ãƒˆUI
â”‚   â”œâ”€â”€ AddToWishlistModal.jsx    # è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â””â”€â”€ EditWishlistModal.jsx     # ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
```

#### 2.7 çŠ¶æ…‹ç®¡ç†

```javascript
// App.js ã«è¿½åŠ 
const [wishlist, setWishlist] = useState(() => loadWishlist())
const [wishlistFilter, setWishlistFilter] = useState({
  tags: [],
  priority: null,
  rating: null
})
const [wishlistSort, setWishlistSort] = useState('createdAt_desc')
```

#### 2.8 ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

```javascript
// src/utils/wishlist.js

export const addToWishlist = (item) => { /*...*/ }
export const removeFromWishlist = (id) => { /*...*/ }
export const updateWishlistItem = (id, updates) => { /*...*/ }
export const getWishlist = () => { /*...*/ }
export const filterWishlist = (items, filters) => { /*...*/ }
export const sortWishlist = (items, sortBy) => { /*...*/ }
export const markAsVisited = (id) => { /*...*/ }
```

### å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

1. **Step 2.1**: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ä½œæˆ
2. **Step 2.2**: Wishlist ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
3. **Step 2.3**: è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«å®Ÿè£…
4. **Step 2.4**: ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
5. **Step 2.5**: ã‚¿ã‚°ç®¡ç†æ©Ÿèƒ½
6. **Step 2.6**: è¨ªå•æ¸ˆã¿ãƒãƒ¼ã‚¯æ©Ÿèƒ½
7. **Step 2.7**: localStorage æ°¸ç¶šåŒ–
8. **Step 2.8**: UI/UX èª¿æ•´ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

---

## Phase 3: Firebaseé€£æºåŸºç›¤æ§‹ç¯‰

### ç›®çš„
ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã«ç§»è¡Œã—ã€ãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚’å®Ÿç¾ã€‚

### æ©Ÿèƒ½è¦ä»¶

#### 3.1 Firebase Authentication

**èªè¨¼æ–¹æ³•**
- Google ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆOAuth 2.0ï¼‰
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- åŒ¿åèªè¨¼ï¼ˆã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†**
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ï¼ˆåå‰ã€å†™çœŸã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»å‰Šé™¤
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### 3.2 Cloud Firestore

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **

```
users/
  â””â”€â”€ {userId}/
      â”œâ”€â”€ profile/
      â”‚   â”œâ”€â”€ displayName: string
      â”‚   â”œâ”€â”€ email: string
      â”‚   â”œâ”€â”€ photoURL: string
      â”‚   â””â”€â”€ createdAt: timestamp
      â”‚
      â”œâ”€â”€ pins/
      â”‚   â””â”€â”€ {pinId}/
      â”‚       â”œâ”€â”€ lat: number
      â”‚       â”œâ”€â”€ lng: number
      â”‚       â”œâ”€â”€ address: string
      â”‚       â””â”€â”€ createdAt: timestamp
      â”‚
      â”œâ”€â”€ wishlist/
      â”‚   â””â”€â”€ {wishlistId}/
      â”‚       â”œâ”€â”€ placeId: string
      â”‚       â”œâ”€â”€ name: string
      â”‚       â”œâ”€â”€ tags: array
      â”‚       â”œâ”€â”€ priority: string
      â”‚       â”œâ”€â”€ memo: string
      â”‚       â””â”€â”€ createdAt: timestamp
      â”‚
      â”œâ”€â”€ history/
      â”‚   â”œâ”€â”€ pins/
      â”‚   â”‚   â””â”€â”€ {historyId}/ {...}
      â”‚   â””â”€â”€ searches/
      â”‚       â””â”€â”€ {historyId}/ {...}
      â”‚
      â””â”€â”€ settings/
          â”œâ”€â”€ theme: string
          â”œâ”€â”€ defaultZoom: number
          â””â”€â”€ notifications: boolean
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«**

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿èª­ã¿æ›¸ãå¯èƒ½
    match /users/{userId}/{document=**} {
      allow read, write: if request.auth != null
                         && request.auth.uid == userId;
    }

    // å…¬é–‹ãƒ‡ãƒ¼ã‚¿ï¼ˆå°†æ¥çš„ãªå…±æœ‰æ©Ÿèƒ½ç”¨ï¼‰
    match /public/{document=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
```

#### 3.3 ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæˆ¦ç•¥

**localStorage â†’ Firestore**

```javascript
// åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ç§»è¡Œãƒ•ãƒ­ãƒ¼
async function migrateLocalDataToFirestore(userId) {
  try {
    // ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
    const localPins = loadPins()
    const localWishlist = loadWishlist()
    const localPinHistory = loadPinHistory()
    const localSearchHistory = loadSearchHistory()

    // Firestoreã«ä¿å­˜
    const batch = firestore.batch()

    // Pins
    localPins.forEach(pin => {
      const docRef = firestore
        .collection('users')
        .doc(userId)
        .collection('pins')
        .doc()
      batch.set(docRef, pin)
    })

    // Wishlist
    localWishlist.forEach(item => {
      const docRef = firestore
        .collection('users')
        .doc(userId)
        .collection('wishlist')
        .doc()
      batch.set(docRef, item)
    })

    await batch.commit()

    // ç§»è¡Œå®Œäº†å¾Œã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã«ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹
    localStorage.setItem('ggmap_migrated', 'true')

    console.log('ãƒ‡ãƒ¼ã‚¿ç§»è¡Œå®Œäº†')
  } catch (error) {
    console.error('ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¨ãƒ©ãƒ¼:', error)
  }
}
```

#### 3.4 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ

```javascript
// Firestoreãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼
useEffect(() => {
  if (!user) return

  // Pinsã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
  const unsubscribePins = firestore
    .collection('users')
    .doc(user.uid)
    .collection('pins')
    .onSnapshot((snapshot) => {
      const pins = []
      snapshot.forEach((doc) => {
        pins.push({ id: doc.id, ...doc.data() })
      })
      setPins(pins)
    })

  // Wishlistã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
  const unsubscribeWishlist = firestore
    .collection('users')
    .doc(user.uid)
    .collection('wishlist')
    .onSnapshot((snapshot) => {
      const wishlist = []
      snapshot.forEach((doc) => {
        wishlist.push({ id: doc.id, ...doc.data() })
      })
      setWishlist(wishlist)
    })

  return () => {
    unsubscribePins()
    unsubscribeWishlist()
  }
}, [user])
```

### æŠ€è¡“ä»•æ§˜

#### 3.5 Firebaseè¨­å®š

**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
npm install firebase
```

**firebase.js è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**

```javascript
// src/firebase/config.js
import { initializeApp } from 'firebase/app'
import { getAuth, GoogleAuthProvider } from 'firebase/auth'
import { getFirestore } from 'firebase/firestore'
import { getAnalytics } from 'firebase/analytics'

const firebaseConfig = {
  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.REACT_APP_FIREBASE_APP_ID,
  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID
}

// Initialize Firebase
const app = initializeApp(firebaseConfig)

export const auth = getAuth(app)
export const firestore = getFirestore(app)
export const analytics = getAnalytics(app)
export const googleProvider = new GoogleAuthProvider()
```

#### 3.6 èªè¨¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```javascript
// src/components/Auth/LoginModal.jsx
import { signInWithPopup, signOut } from 'firebase/auth'
import { auth, googleProvider } from '../../firebase/config'

const LoginModal = ({ isOpen, onClose }) => {
  const handleGoogleLogin = async () => {
    try {
      const result = await signInWithPopup(auth, googleProvider)
      const user = result.user

      // ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒã‚§ãƒƒã‚¯
      const migrated = localStorage.getItem('ggmap_migrated')
      if (!migrated) {
        await migrateLocalDataToFirestore(user.uid)
      }

      onClose()
    } catch (error) {
      console.error('ãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼:', error)
    }
  }

  const handleLogout = async () => {
    try {
      await signOut(auth)
      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚‚ã‚¯ãƒªã‚¢ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
      // localStorage.clear()
    } catch (error) {
      console.error('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼:', error)
    }
  }

  return (
    <div className={styles.modal}>
      <h2>ãƒ­ã‚°ã‚¤ãƒ³</h2>
      <button onClick={handleGoogleLogin}>
        <img src="/google-icon.svg" alt="Google" />
        Googleã§ãƒ­ã‚°ã‚¤ãƒ³
      </button>
    </div>
  )
}
```

#### 3.7 èªè¨¼çŠ¶æ…‹ç®¡ç†

```javascript
// src/hooks/useAuth.js
import { useState, useEffect } from 'react'
import { onAuthStateChanged } from 'firebase/auth'
import { auth } from '../firebase/config'

export const useAuth = () => {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, (user) => {
      setUser(user)
      setLoading(false)
    })

    return unsubscribe
  }, [])

  return { user, loading }
}
```

### å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

1. **Step 3.1**: Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»è¨­å®š
2. **Step 3.2**: Firebase SDK çµ±åˆ
3. **Step 3.3**: èªè¨¼UIå®Ÿè£…ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
4. **Step 3.4**: Firestore ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ
5. **Step 3.5**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®š
6. **Step 3.6**: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½å®Ÿè£…
7. **Step 3.7**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸå®Ÿè£…
8. **Step 3.8**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆFirestore Persistenceï¼‰
9. **Step 3.9**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
10. **Step 3.10**: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

- **ç’°å¢ƒå¤‰æ•°ç®¡ç†**: Firebaseè¨­å®šã‚’.envãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†
- **HTTPSé€šä¿¡**: æœ¬ç•ªç’°å¢ƒã¯å¿…ãšHTTPS
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«**: å³æ ¼ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **APIã‚­ãƒ¼åˆ¶é™**: Firebase Consoleã§ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¶é™
- **èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³**: é©åˆ‡ãªæœ‰åŠ¹æœŸé™è¨­å®š

---

## Phase 4: çµŒè·¯ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº

### ç›®çš„
æœ€é©ãªçµŒè·¯ã‚’ææ¡ˆã—ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åŒæœŸã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

### æ©Ÿèƒ½è¦ä»¶

#### 4.1 çµŒè·¯æ¤œç´¢æ©Ÿèƒ½

**Google Directions API çµ±åˆ**

**å¯¾å¿œã™ã‚‹äº¤é€šæ‰‹æ®µ**
- ğŸš— è»Š
- ğŸš‡ é›»è»Š
- ğŸš¶ å¾’æ­©
- ğŸš´ è‡ªè»¢è»Š
- ğŸšŒ ãƒã‚¹ï¼ˆTransitï¼‰

**è¡¨ç¤ºã™ã‚‹æƒ…å ±**
- æ‰€è¦æ™‚é–“
- è·é›¢
- çµŒè·¯ã®è©³ç´°ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
- ä¹—æ›æƒ…å ±ï¼ˆé›»è»Šãƒ»ãƒã‚¹ã®å ´åˆï¼‰
- æ–™é‡‘ï¼ˆTransit ã®å ´åˆï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ äº¤é€šæƒ…å ±
- è¤‡æ•°ãƒ«ãƒ¼ãƒˆæ¯”è¼ƒ

**UIè¨­è¨ˆ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµŒè·¯ã‚’æ¤œç´¢                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‡ºç™ºåœ°: [ç¾åœ¨åœ° â–¼]                 â”‚
â”‚  ç›®çš„åœ°: ã‚«ãƒ•ã‚§â—‹â—‹                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸš—] [ğŸš‡] [ğŸš¶] [ğŸš´]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ«ãƒ¼ãƒˆ1 (æ¨å¥¨)                     â”‚
â”‚  â±ï¸ 25åˆ†  ğŸ“ 3.5km  ğŸ’´ Â¥280       â”‚
â”‚  ğŸš‡ é›»è»Š: æ¸‹è°· â†’ è¡¨å‚é“ (10åˆ†)      â”‚
â”‚  ğŸš¶ å¾’æ­©: 800m (10åˆ†)              â”‚
â”‚  [è©³ç´°ã‚’è¦‹ã‚‹]  [ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«è¿½åŠ ]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ«ãƒ¼ãƒˆ2                            â”‚
â”‚  â±ï¸ 30åˆ†  ğŸ“ 4.2km  ğŸ’´ Â¥200       â”‚
â”‚  ...                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2 ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆæ©Ÿèƒ½

**ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å‹UI**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãŠå‡ºã‹ã‘ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«                â”‚
â”‚  ğŸ“… 2025å¹´12æœˆ15æ—¥ (åœŸ)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  10:00  è‡ªå®…å‡ºç™º                    â”‚
â”‚    â†“ ğŸš‡ é›»è»Š 25åˆ†                  â”‚
â”‚  10:25  ã‚«ãƒ•ã‚§â—‹â—‹ åˆ°ç€               â”‚
â”‚         æ»åœ¨æ™‚é–“: 1æ™‚é–“              â”‚
â”‚    â†“ ğŸš¶ å¾’æ­© 10åˆ†                  â”‚
â”‚  11:35  ç¾è¡“é¤¨ åˆ°ç€                 â”‚
â”‚         æ»åœ¨æ™‚é–“: 2æ™‚é–“              â”‚
â”‚    â†“ ğŸš— è»Š 20åˆ†                    â”‚
â”‚  14:00  ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ åˆ°ç€              â”‚
â”‚         æ»åœ¨æ™‚é–“: 1.5æ™‚é–“            â”‚
â”‚    â†“ ğŸš‡ é›»è»Š 30åˆ†                  â”‚
â”‚  16:00  è‡ªå®…åˆ°ç€                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆè¨ˆæ‰€è¦æ™‚é–“: 6æ™‚é–“                â”‚
â”‚  åˆè¨ˆç§»å‹•æ™‚é–“: 1æ™‚é–“25åˆ†            â”‚
â”‚  åˆè¨ˆç§»å‹•è·é›¢: 15.3km               â”‚
â”‚  äº¤é€šè²»: Â¥850                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“¥ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]  [ğŸ“† ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½**
- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§é †åºå¤‰æ›´
- å„ã‚¹ãƒãƒƒãƒˆã®æ»åœ¨æ™‚é–“è¨­å®š
- ç§»å‹•æ™‚é–“ã®è‡ªå‹•è¨ˆç®—
- å‡ºç™ºæ™‚åˆ»ã®è‡ªå‹•èª¿æ•´
- åå‰ã‚’ä»˜ã‘ã¦ä¿å­˜
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½

#### 4.3 Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº

**Google Calendar API çµ±åˆ**

**æ©Ÿèƒ½**
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä½œæˆ
- ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã«å ´æ‰€ãƒ»ãƒ¡ãƒ¢ã‚’å«ã‚ã‚‹
- ç§»å‹•æ™‚é–“ã‚‚åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦è¿½åŠ 
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ç·¨é›†ãƒ»å‰Šé™¤

**ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ä¾‹**

```javascript
{
  summary: 'ã‚«ãƒ•ã‚§â—‹â—‹',
  location: 'æ±äº¬éƒ½æ¸‹è°·åŒº...',
  description: 'ãŠæ°—ã«å…¥ã‚Šã®ã‚«ãƒ•ã‚§ã€‚ãƒ‘ã‚¹ã‚¿ãŒãŠã™ã™ã‚ã€‚',
  start: {
    dateTime: '2025-12-15T10:25:00+09:00',
    timeZone: 'Asia/Tokyo'
  },
  end: {
    dateTime: '2025-12-15T11:25:00+09:00',
    timeZone: 'Asia/Tokyo'
  },
  reminders: {
    useDefault: false,
    overrides: [
      { method: 'popup', minutes: 30 }
    ]
  }
}
```

### æŠ€è¡“ä»•æ§˜

#### 4.4 Google Directions API

```javascript
// src/services/directions.js
export const getDirections = async (origin, destination, mode = 'DRIVING') => {
  return new Promise((resolve, reject) => {
    if (!window.google?.maps) {
      reject(new Error('Google Maps not loaded'))
      return
    }

    const directionsService = new window.google.maps.DirectionsService()

    const request = {
      origin: origin,
      destination: destination,
      travelMode: window.google.maps.TravelMode[mode],
      language: 'ja',
      region: 'JP',
      // Transitã®å ´åˆ
      ...(mode === 'TRANSIT' && {
        transitOptions: {
          departureTime: new Date(),
          modes: ['BUS', 'RAIL', 'SUBWAY', 'TRAIN'],
          routingPreference: 'FEWER_TRANSFERS'
        }
      })
    }

    directionsService.route(request, (result, status) => {
      if (status === 'OK') {
        resolve(result)
      } else {
        reject(new Error(`Directions request failed: ${status}`))
      }
    })
  })
}
```

#### 4.5 Google Calendar API

**OAuth 2.0 ã‚¹ã‚³ãƒ¼ãƒ—**

```javascript
const CALENDAR_SCOPES = [
  'https://www.googleapis.com/auth/calendar.events'
]
```

**ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ**

```javascript
// src/services/calendar.js
import { gapi } from 'gapi-script'

export const initGoogleCalendar = () => {
  gapi.load('client:auth2', () => {
    gapi.client.init({
      apiKey: process.env.REACT_APP_GOOGLE_API_KEY,
      clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID,
      discoveryDocs: [
        'https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'
      ],
      scope: 'https://www.googleapis.com/auth/calendar.events'
    })
  })
}

export const createCalendarEvent = async (event) => {
  try {
    const response = await gapi.client.calendar.events.insert({
      calendarId: 'primary',
      resource: event
    })
    return response.result
  } catch (error) {
    console.error('Calendar event creation error:', error)
    throw error
  }
}

export const createScheduleEvents = async (schedule) => {
  const events = []

  // å„ã‚¹ãƒãƒƒãƒˆã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä½œæˆ
  for (const item of schedule.items) {
    const event = {
      summary: item.name,
      location: item.address,
      description: item.memo || '',
      start: {
        dateTime: item.startTime,
        timeZone: 'Asia/Tokyo'
      },
      end: {
        dateTime: item.endTime,
        timeZone: 'Asia/Tokyo'
      },
      reminders: {
        useDefault: false,
        overrides: [
          { method: 'popup', minutes: 30 }
        ]
      }
    }

    const result = await createCalendarEvent(event)
    events.push(result)
  }

  return events
}
```

#### 4.6 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 

```
src/components/
â”œâ”€â”€ Route/
â”‚   â”œâ”€â”€ RouteSearch.jsx          # çµŒè·¯æ¤œç´¢
â”‚   â”œâ”€â”€ RouteDetails.jsx         # çµŒè·¯è©³ç´°
â”‚   â”œâ”€â”€ RouteComparison.jsx      # ãƒ«ãƒ¼ãƒˆæ¯”è¼ƒ
â”‚   â””â”€â”€ RouteMap.jsx             # çµŒè·¯è¡¨ç¤ºåœ°å›³
â”‚
â”œâ”€â”€ Schedule/
â”‚   â”œâ”€â”€ ScheduleBuilder.jsx      # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ
â”‚   â”œâ”€â”€ ScheduleTimeline.jsx     # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º
â”‚   â”œâ”€â”€ ScheduleItem.jsx         # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¢ã‚¤ãƒ†ãƒ 
â”‚   â”œâ”€â”€ DurationPicker.jsx       # æ»åœ¨æ™‚é–“é¸æŠ
â”‚   â””â”€â”€ ScheduleExport.jsx       # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
â”‚
â””â”€â”€ Calendar/
    â”œâ”€â”€ CalendarSync.jsx         # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åŒæœŸ
    â””â”€â”€ CalendarAuth.jsx         # Calendar APIèªè¨¼
```

### å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

1. **Step 4.1**: Directions API çµ±åˆ
2. **Step 4.2**: RouteSearch ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
3. **Step 4.3**: è¤‡æ•°ãƒ«ãƒ¼ãƒˆæ¯”è¼ƒæ©Ÿèƒ½
4. **Step 4.4**: çµŒè·¯ã‚’åœ°å›³ä¸Šã«è¡¨ç¤º
5. **Step 4.5**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ“ãƒ«ãƒ€ãƒ¼å®Ÿè£…
6. **Step 4.6**: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ UI å®Ÿè£…
7. **Step 4.7**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½
8. **Step 4.8**: Google Calendar API çµ±åˆ
9. **Step 4.9**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆæ©Ÿèƒ½
10. **Step 4.10**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©

### ç·åˆãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
// User Profile
interface UserProfile {
  uid: string
  displayName: string
  email: string
  photoURL: string
  createdAt: number
  settings: UserSettings
}

interface UserSettings {
  theme: 'light' | 'dark' | 'auto'
  defaultZoom: number
  defaultCenter: { lat: number; lng: number }
  defaultTransportMode: 'DRIVING' | 'TRANSIT' | 'WALKING' | 'BICYCLING'
  notifications: boolean
  language: 'ja' | 'en'
}

// Pin
interface Pin {
  id: string
  lat: number
  lng: number
  address: string
  createdAt: number
  userId?: string  // Firebaseä½¿ç”¨æ™‚
}

// Wishlist Item (è©³ç´°ç‰ˆ)
interface WishlistItem {
  id: string
  placeId: string
  name: string
  address: string
  lat: number
  lng: number
  rating?: number
  priceLevel?: number
  photoUrl?: string
  tags: string[]
  priority: 'high' | 'medium' | 'low'
  memo: string
  visitDate?: string
  createdAt: number
  updatedAt: number
  visited: boolean
  visitedAt?: number
  userId?: string
}

// Schedule
interface Schedule {
  id: string
  name: string
  date: string
  items: ScheduleItem[]
  totalDuration: number  // åˆ†å˜ä½
  totalDistance: number  // ãƒ¡ãƒ¼ãƒˆãƒ«å˜ä½
  totalCost: number      // å††
  createdAt: number
  updatedAt: number
  userId?: string
  exported: boolean
  calendarEventIds?: string[]  // Google Calendar ã‚¤ãƒ™ãƒ³ãƒˆID
}

interface ScheduleItem {
  id: string
  order: number
  place: WishlistItem | Pin
  arrivalTime: string     // ISO 8601
  departureTime: string   // ISO 8601
  duration: number        // æ»åœ¨æ™‚é–“ï¼ˆåˆ†ï¼‰
  route?: RouteInfo       // æ¬¡ã®å ´æ‰€ã¸ã®çµŒè·¯
}

interface RouteInfo {
  distance: number        // ãƒ¡ãƒ¼ãƒˆãƒ«
  duration: number        // åˆ†
  mode: 'DRIVING' | 'TRANSIT' | 'WALKING' | 'BICYCLING'
  steps: RouteStep[]
  polyline: string       // ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒãƒªãƒ©ã‚¤ãƒ³
  fare?: {
    value: number        // å††
    currency: string
  }
}

interface RouteStep {
  instruction: string
  distance: number
  duration: number
  mode: string
  transitDetails?: {
    line: string
    departure: string
    arrival: string
  }
}

// Place Details (from Google Places API)
interface PlaceDetails {
  placeId: string
  name: string
  formattedAddress: string
  formattedPhoneNumber?: string
  website?: string
  rating?: number
  userRatingsTotal?: number
  priceLevel?: number
  openingHours?: OpeningHours
  photos?: Photo[]
  reviews?: Review[]
  geometry: {
    location: { lat: number; lng: number }
  }
  types: string[]
  wheelchairAccessibleEntrance?: boolean
  url: string
}

interface OpeningHours {
  openNow: boolean
  weekdayText: string[]
  periods: Period[]
}

interface Period {
  open: { day: number; time: string }
  close: { day: number; time: string }
}

interface Photo {
  photoReference: string
  height: number
  width: number
  htmlAttributions: string[]
}

interface Review {
  authorName: string
  authorUrl?: string
  profilePhotoUrl?: string
  rating: number
  relativeTimeDescription: string
  text: string
  time: number
}

// History
interface PinHistory {
  id: string
  lat: number
  lng: number
  address: string
  timestamp: number
  userId?: string
}

interface SearchHistory {
  id: string
  query: string
  type: 'places' | 'geocode'
  results: number
  firstResult?: {
    name: string
    address: string
    lat: number
    lng: number
  }
  timestamp: number
  userId?: string
}
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

**ç¾åœ¨**
- React 18.2.0
- SASS/SCSS
- Axios

**Phase 1-2ã§è¿½åŠ **
- React DnDï¼ˆãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ï¼‰
- date-fnsï¼ˆæ—¥ä»˜å‡¦ç†ï¼‰
- React Swipeableï¼ˆå†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼‰

**Phase 3ã§è¿½åŠ **
- Firebase SDK 10.x
  - Authentication
  - Firestore
  - Analytics
- React Context APIï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†å¼·åŒ–ï¼‰

**Phase 4ã§è¿½åŠ **
- gapi-scriptï¼ˆGoogle API Clientï¼‰
- @react-google-maps/apiï¼ˆDirectionsè¡¨ç¤ºï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆFirebaseï¼‰

- Firebase Authentication
- Cloud Firestore
- Firebase Hosting
- Cloud Functionsï¼ˆå°†æ¥çš„ãªæ‹¡å¼µç”¨ï¼‰
- Cloud Storageï¼ˆç”»åƒä¿å­˜ç”¨ï¼‰

### Google APIs

- Google Maps JavaScript API
- Google Places API (Text Search, Details, Photos)
- Google Geocoding API
- Google Directions API
- Google Calendar API
- Google Drive APIï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ã€å°†æ¥ï¼‰

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

- ESLint
- Prettier
- Git / GitHub
- VS Code
- Chrome DevTools
- Firebase Emulator Suiteï¼ˆé–‹ç™ºç’°å¢ƒï¼‰

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

### èªè¨¼ãƒ»èªå¯

- Firebase Authentication ã«ã‚ˆã‚‹å¤šè¦ç´ èªè¨¼å¯¾å¿œ
- OAuth 2.0 ã«ã‚ˆã‚‹ Google ãƒ­ã‚°ã‚¤ãƒ³
- JWT ãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- é©åˆ‡ãªæœ‰åŠ¹æœŸé™è¨­å®š

### ãƒ‡ãƒ¼ã‚¿ä¿è­·

- **é€šä¿¡ã®æš—å·åŒ–**: HTTPSé€šä¿¡å¿…é ˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æš—å·åŒ–**: Firestore ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æš—å·åŒ–
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: Firestore Security Rules ã§å³æ ¼ãªåˆ¶å¾¡
- **API ã‚­ãƒ¼åˆ¶é™**: Firebase Console ã§ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ»IPåˆ¶é™

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

- **ãƒ‡ãƒ¼ã‚¿åˆ†é›¢**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨åˆ†é›¢
- **ãƒ‡ãƒ¼ã‚¿å‰Šé™¤**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤æ™‚ã«å…¨ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
- **åŒ¿ååŒ–**: ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿ã¯åŒ¿ååŒ–
- **GDPRå¯¾å¿œ**: EUåœãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```javascript
// Firestore Security Rules ä¾‹
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // èªè¨¼ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
    match /users/{userId}/{document=**} {
      allow read, write: if request.auth != null
                         && request.auth.uid == userId;
    }

    // ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºåˆ¶é™
    match /users/{userId}/wishlist/{wishlistId} {
      allow create: if request.auth != null
                    && request.auth.uid == userId
                    && request.resource.data.memo.size() < 1000;
    }

    // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆCloud Functions ã§å®Ÿè£…ï¼‰
    // allow write: if request.time > resource.data.lastUpdate + duration.value(1, 's');
  }
}
```

### ç’°å¢ƒå¤‰æ•°ç®¡ç†

```bash
# .env.example
REACT_APP_API_KEY=your_google_maps_api_key
REACT_APP_FIREBASE_API_KEY=your_firebase_api_key
REACT_APP_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
REACT_APP_FIREBASE_PROJECT_ID=your_project_id
REACT_APP_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=123456789
REACT_APP_FIREBASE_APP_ID=1:123456789:web:abcdef
REACT_APP_GOOGLE_CLIENT_ID=your_oauth_client_id
```

---

## å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Phase 1: è©³ç´°æƒ…å ±è¡¨ç¤ºæ©Ÿèƒ½ï¼ˆ2é€±é–“ï¼‰

**Week 1**
- Day 1-2: PlaceDetail ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆãƒ»å®Ÿè£…
- Day 3-4: Places API Details çµ±åˆ
- Day 5-7: å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º

**Week 2**
- Day 8-10: å–¶æ¥­æ™‚é–“ãƒ»å–¶æ¥­çŠ¶æ³è¡¨ç¤º
- Day 11-12: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´
- Day 13-14: ãƒ†ã‚¹ãƒˆãƒ»ãƒã‚°ä¿®æ­£ãƒ»ãƒªãƒªãƒ¼ã‚¹

### Phase 2: è¡ŒããŸã„ã¨ã“ã‚ãƒªã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆ3é€±é–“ï¼‰

**Week 1**
- Day 1-2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å®Ÿè£…
- Day 3-5: Wishlist ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- Day 6-7: è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«å®Ÿè£…

**Week 2**
- Day 8-10: ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- Day 11-12: ã‚¿ã‚°ç®¡ç†æ©Ÿèƒ½
- Day 13-14: è¨ªå•æ¸ˆã¿ãƒãƒ¼ã‚¯æ©Ÿèƒ½

**Week 3**
- Day 15-17: localStorage æ°¸ç¶šåŒ–
- Day 18-19: UI/UX èª¿æ•´
- Day 20-21: ãƒ†ã‚¹ãƒˆãƒ»ãƒã‚°ä¿®æ­£ãƒ»ãƒªãƒªãƒ¼ã‚¹

### Phase 3: Firebaseé€£æºåŸºç›¤æ§‹ç¯‰ï¼ˆ4é€±é–“ï¼‰

**Week 1**
- Day 1-2: Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
- Day 3-5: Authentication å®Ÿè£…
- Day 6-7: ãƒ­ã‚°ã‚¤ãƒ³UIå®Ÿè£…

**Week 2**
- Day 8-10: Firestore ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®Ÿè£…
- Day 11-12: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®š
- Day 13-14: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½å®Ÿè£…

**Week 3**
- Day 15-17: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸå®Ÿè£…
- Day 18-19: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- Day 20-21: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**Week 4**
- Day 22-24: åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ
- Day 25-26: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- Day 27-28: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒªãƒªãƒ¼ã‚¹

### Phase 4: çµŒè·¯ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æºï¼ˆ3é€±é–“ï¼‰

**Week 1**
- Day 1-3: Directions API çµ±åˆ
- Day 4-5: RouteSearch ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- Day 6-7: è¤‡æ•°ãƒ«ãƒ¼ãƒˆæ¯”è¼ƒæ©Ÿèƒ½

**Week 2**
- Day 8-10: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ“ãƒ«ãƒ€ãƒ¼å®Ÿè£…
- Day 11-12: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ UI å®Ÿè£…
- Day 13-14: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½

**Week 3**
- Day 15-17: Google Calendar API çµ±åˆ
- Day 18-19: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ
- Day 20-21: ãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒªãƒ¼ã‚¹

### ç·åˆå®Ÿè£…æœŸé–“: ç´„3ãƒ¶æœˆ

---

## ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### Milestone 1: æƒ…å ±å……å®ŸåŒ–ï¼ˆPhase 1å®Œäº†ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å ´æ‰€ã®è©³ç´°æƒ…å ±ã‚’ç¢ºèªã§ãã‚‹
- å–¶æ¥­æ™‚é–“ãƒ»å£ã‚³ãƒŸã‚’è¦‹ã¦è¨ªå•ã‚’åˆ¤æ–­ã§ãã‚‹
- å†™çœŸã§å ´æ‰€ã®é›°å›²æ°—ã‚’æŠŠæ¡ã§ãã‚‹

### Milestone 2: è¨ˆç”»ç®¡ç†ï¼ˆPhase 2å®Œäº†ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¡ŒããŸã„å ´æ‰€ã‚’ãƒªã‚¹ãƒˆç®¡ç†ã§ãã‚‹
- ã‚¿ã‚°ãƒ»ãƒ¡ãƒ¢ã§æƒ…å ±ã‚’æ•´ç†ã§ãã‚‹
- å„ªå…ˆåº¦ã‚’ã¤ã‘ã¦è¨ˆç”»ã‚’ç«‹ã¦ã‚‰ã‚Œã‚‹

### Milestone 3: ã‚¯ãƒ©ã‚¦ãƒ‰åŒ–ï¼ˆPhase 3å®Œäº†ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãŒã‚¯ãƒ©ã‚¦ãƒ‰ã«ä¿å­˜ã•ã‚Œã‚‹
- ãƒ‡ãƒã‚¤ã‚¹é–“ã§ãƒ‡ãƒ¼ã‚¿ãŒåŒæœŸã•ã‚Œã‚‹
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ãŒå¯èƒ½ã«ãªã‚‹

### Milestone 4: ç·åˆãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ï¼ˆPhase 4å®Œäº†ï¼‰
- æœ€é©ãªçµŒè·¯ãŒææ¡ˆã•ã‚Œã‚‹
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã§ãã‚‹
- Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨é€£æºã§ãã‚‹

### æœ€çµ‚ã‚´ãƒ¼ãƒ«
**GGMapãŒæ—…è¡Œãƒ»å¤–å‡ºã®ç·åˆãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã—ã¦ç¢ºç«‹ã•ã‚Œã‚‹**

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **Phase 1ã‹ã‚‰é †æ¬¡ç€æ‰‹**
2. **å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†å¾Œã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†**
3. **å¿…è¦ã«å¿œã˜ã¦ä»•æ§˜èª¿æ•´**
4. **æ®µéšçš„ã«ãƒªãƒªãƒ¼ã‚¹ï¼ˆã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºï¼‰**

---

## ä»˜éŒ²: å‚è€ƒãƒªãƒ³ã‚¯

### Google APIs ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Google Maps JavaScript API](https://developers.google.com/maps/documentation/javascript)
- [Places API](https://developers.google.com/maps/documentation/places/web-service)
- [Directions API](https://developers.google.com/maps/documentation/directions)
- [Calendar API](https://developers.google.com/calendar/api)

### Firebase ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Firebase Authentication](https://firebase.google.com/docs/auth)
- [Cloud Firestore](https://firebase.google.com/docs/firestore)
- [Security Rules](https://firebase.google.com/docs/firestore/security/get-started)

### React ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [React DnD](https://react-dnd.github.io/react-dnd/)
- [date-fns](https://date-fns.org/)
- [React Swipeable](https://github.com/FormidableLabs/react-swipeable)

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**æœ€çµ‚æ›´æ–°æ—¥**: 2025-11-19
**ä½œæˆè€…**: Claude (Anthropic)
